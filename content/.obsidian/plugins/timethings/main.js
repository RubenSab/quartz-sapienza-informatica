/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => TimeThings
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");
var import_obsidian3 = require("obsidian");

// src/BOMS.ts
function getValue(obj, fieldPath) {
  const keys = fieldPath.split(".");
  let value = obj;
  for (const key of keys) {
    value = value[key];
    if (value === void 0) {
      return void 0;
    }
  }
  return value;
}
function setValue(obj, path, value) {
  const keys = path.split(".");
  let currentLevel = obj;
  for (let i = 0; i < keys.length - 1; i++) {
    const key = keys[i];
    if (!currentLevel[key]) {
      currentLevel[key] = {};
    }
    currentLevel = currentLevel[key];
  }
  currentLevel[keys[keys.length - 1]] = value;
}

// src/CAMS.ts
function isLineIndented(line) {
  return /^[\s\t]/.test(line);
}
function isFrontmatterPresent(editor) {
  if (editor.getLine(0) !== "---") {
    return false;
  }
  for (let i = 1; i <= editor.lastLine(); i++) {
    if (editor.getLine(i) === "---") {
      return true;
    }
  }
  return false;
}
function frontmatterEndLine(editor) {
  if (isFrontmatterPresent(editor)) {
    for (let i = 1; i <= editor.lastLine(); i++) {
      if (editor.getLine(i) === "---") {
        return i;
      }
    }
  }
  return void 0;
}
function getLine(editor, fieldPath) {
  const frontmatterLine = frontmatterEndLine(editor);
  const keys = fieldPath.split(".");
  const depth = keys.length;
  if (frontmatterLine === void 0) {
    return void 0;
  }
  let targetDepth = 1;
  let currentDepth = 1;
  let startLine = 1;
  let emergingPath = [];
  for (const key of keys) {
    for (let i = startLine; i <= frontmatterLine; i++) {
      const currentLine = editor.getLine(i);
      const currentField = currentLine.split(":");
      const currentFieldName = currentField[0].trim();
      if (currentFieldName === key) {
        emergingPath.push(currentFieldName);
        let targetPath = fieldPath.split(".");
        let targetPathShrink = targetPath.slice(0, emergingPath.length);
        if (targetPathShrink.join(".") === emergingPath.join(".") === false) {
          emergingPath.pop();
          startLine = i + 1;
          continue;
        } else {
          if (emergingPath.join(".") === fieldPath) {
            if (targetDepth > 1) {
              if (this.isLineIndented(currentLine) === false) {
                return void 0;
              }
            } else {
              if (isLineIndented(currentLine)) {
                startLine = i + 1;
                emergingPath = [];
                continue;
              }
            }
            return i;
          }
          startLine = i + 1;
          targetDepth += 1;
          continue;
        }
      }
    }
  }
  return void 0;
}
function setValue2(editor, fieldPath, fieldValue) {
  const fieldLine = getLine(editor, fieldPath);
  if (fieldLine === void 0) {
    return;
  }
  const initialLine = editor.getLine(fieldLine).split(":", 1);
  const newLine = initialLine[0] + ": " + fieldValue;
  editor.setLine(fieldLine, newLine);
}

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  clockFormat: "hh:mm A",
  updateIntervalMilliseconds: "1000",
  isUTC: false,
  modifiedKeyName: "updated_at",
  modifiedKeyFormat: "YYYY-MM-DD[T]HH:mm:ss.SSSZ",
  enableClock: true,
  enableModifiedKeyUpdate: true,
  useCustomFrontmatterHandlingSolution: false,
  updateIntervalFrontmatterMinutes: 1,
  editDurationPath: "edited_seconds",
  enableEditDurationKey: true,
  nonTypingEditingTimePercentage: 22
};
var TimeThingsSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const createLink = () => {
      const linkEl = document.createDocumentFragment();
      linkEl.append(
        linkEl.createEl("a", {
          href: "https://momentjscom.readthedocs.io/en/latest/moment/04-displaying/01-format/",
          text: "Moment.js date format documentation"
        })
      );
      return linkEl;
    };
    new import_obsidian.Setting(containerEl).setName("Use custom frontmatter handling solution").setDesc("Smoother experiene. Prone to bugs if you use a nested value.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.useCustomFrontmatterHandlingSolution).onChange(async (newValue) => {
        this.plugin.settings.useCustomFrontmatterHandlingSolution = newValue;
        await this.plugin.saveSettings();
        await this.display();
      })
    );
    containerEl.createEl("h1", { text: "Status bar" });
    containerEl.createEl("p", { text: "Displays clock in the status bar." });
    new import_obsidian.Setting(containerEl).setName("Enable status bar clock").setDesc("Show clock on the status bar? This setting requires restart of the plugin.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableClock).onChange(async (newValue) => {
        this.plugin.settings.enableClock = newValue;
        await this.plugin.saveSettings();
        await this.display();
      })
    );
    if (this.plugin.settings.enableClock === true) {
      new import_obsidian.Setting(containerEl).setName("Date format").setDesc(createLink()).addText(
        (text) => text.setPlaceholder("hh:mm A").setValue(this.plugin.settings.clockFormat).onChange(async (value) => {
          this.plugin.settings.clockFormat = value;
          await this.plugin.saveSettings();
        })
      );
      new import_obsidian.Setting(containerEl).setName("Update interval").setDesc("In milliseconds. Restart plugin for this setting to take effect.").addText(
        (text) => text.setPlaceholder("1000").setValue(this.plugin.settings.updateIntervalMilliseconds).onChange(async (value) => {
          this.plugin.settings.updateIntervalMilliseconds = value;
          await this.plugin.saveSettings();
        })
      );
      new import_obsidian.Setting(containerEl).setName("UTC timezone").setDesc("Use UTC instead of local time?").addToggle(
        (toggle) => toggle.setValue(this.plugin.settings.isUTC).onChange(async (newValue) => {
          this.plugin.settings.isUTC = newValue;
          await this.plugin.saveSettings();
        })
      );
    }
    containerEl.createEl("h1", { text: "Frontmatter" });
    containerEl.createEl("p", { text: "Handles timestamp keys in frontmatter." });
    containerEl.createEl("h2", { text: "\u{1F511} Modified" });
    new import_obsidian.Setting(containerEl).setName("Enable update of the modified key").setDesc("").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableModifiedKeyUpdate).onChange(async (newValue) => {
        this.plugin.settings.enableModifiedKeyUpdate = newValue;
        await this.plugin.saveSettings();
        await this.display();
      })
    );
    if (this.plugin.settings.enableModifiedKeyUpdate === true) {
      new import_obsidian.Setting(containerEl).setName("Modified key name").setDesc("Supports nested keys. For example `timethings.updated_at`").addText(
        (text) => text.setPlaceholder("updated_at").setValue(this.plugin.settings.modifiedKeyName).onChange(async (value) => {
          this.plugin.settings.modifiedKeyName = value;
          await this.plugin.saveSettings();
        })
      );
      new import_obsidian.Setting(containerEl).setName("Modified key format").setDesc(createLink()).addText(
        (text) => text.setPlaceholder("YYYY-MM-DD[T]HH:mm:ss.SSSZ").setValue(this.plugin.settings.modifiedKeyFormat).onChange(async (value) => {
          this.plugin.settings.modifiedKeyFormat = value;
          await this.plugin.saveSettings();
        })
      );
      if (this.plugin.settings.useCustomFrontmatterHandlingSolution === false) {
        new import_obsidian.Setting(containerEl).setName("Interval between updates").setDesc("Only for Obsidian frontmatter API.").addSlider(
          (slider) => slider.setLimits(1, 15, 1).setValue(this.plugin.settings.updateIntervalFrontmatterMinutes).onChange(async (value) => {
            this.plugin.settings.updateIntervalFrontmatterMinutes = value;
            await this.plugin.saveSettings();
          }).setDynamicTooltip()
        );
      }
    }
    containerEl.createEl("h2", { text: "\u{1F511} Edit duration" });
    containerEl.createEl("p", { text: "Track for how long you have been editing a note." });
    new import_obsidian.Setting(containerEl).setName("Enable edit duration key").setDesc("").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableEditDurationKey).onChange(async (newValue) => {
      this.plugin.settings.enableEditDurationKey = newValue;
      await this.plugin.saveSettings();
      await this.display();
    }));
    if (this.plugin.settings.enableEditDurationKey === true) {
      new import_obsidian.Setting(containerEl).setName("Edit duration key name").setDesc("Supports nested keys. For example `timethings.edited_seconds`").addText((text) => text.setPlaceholder("edited_seconds").setValue(this.plugin.settings.editDurationPath).onChange(async (value) => {
        this.plugin.settings.editDurationPath = value;
        await this.plugin.saveSettings();
      }));
      const descA = document.createDocumentFragment();
      descA.append(
        "The portion of time you are not typing when editing a note. Works best with custom frontmatter handling solution. ",
        createEl("a", {
          href: "https://github.com/DynamicPlayerSector/timethings/wiki/Calculating-your-non%E2%80%90typing-editing-percentage",
          text: "How to calculate yours?"
        })
      );
      new import_obsidian.Setting(containerEl).setName("Non-typing editing time percentage").setDesc(descA).addSlider(
        (slider) => slider.setLimits(0, 40, 2).setValue(this.plugin.settings.nonTypingEditingTimePercentage).onChange(async (value) => {
          this.plugin.settings.nonTypingEditingTimePercentage = value;
          await this.plugin.saveSettings();
        }).setDynamicTooltip()
      );
    }
    containerEl.createEl("h1", { text: "Danger zone" });
    containerEl.createEl("p", { text: "You've been warned!" });
    new import_obsidian.Setting(containerEl).setName("Reset settings").setDesc("Resets settings to default").addButton(
      (btn) => btn.setIcon("switch").setButtonText("Reset settings").setTooltip("Reset settings").onClick(() => {
        this.plugin.settings = Object.assign({}, DEFAULT_SETTINGS, this.plugin.loadData());
        this.display();
      })
    );
  }
};

// src/time.utils.ts
function momentToClockEmoji(time) {
  const hour = time.hour();
  const hour12 = hour % 12 || 12;
  const clockEmojiMap = {
    1: "\u{1F550}",
    2: "\u{1F551}",
    3: "\u{1F552}",
    4: "\u{1F553}",
    5: "\u{1F554}",
    6: "\u{1F555}",
    7: "\u{1F556}",
    8: "\u{1F557}",
    9: "\u{1F558}",
    10: "\u{1F559}",
    11: "\u{1F55A}",
    12: "\u{1F55B}"
  };
  const result = clockEmojiMap[hour12] || "\u23F0";
  return result;
}

// src/main.ts
var TimeThings = class extends import_obsidian2.Plugin {
  constructor() {
    super(...arguments);
    this.isProccessing = false;
  }
  async onload() {
    await this.loadSettings();
    this.isDebugBuild = false;
    this.allowEditDurationUpdate = true;
    this.setUpStatusBarItems();
    this.registerFileModificationEvent();
    this.registerKeyDownDOMEvent();
    this.registerLeafChangeEvent();
    this.registerMouseDownDOMEvent();
    this.addSettingTab(new TimeThingsSettingsTab(this.app, this));
  }
  registerMouseDownDOMEvent() {
    this.registerDomEvent(document, "mousedown", (evt) => {
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
      if (activeView === null) {
        return;
      }
      const editor = activeView.editor;
      if (editor.hasFocus() === false) {
        return;
      }
      if (this.settings.useCustomFrontmatterHandlingSolution === true) {
        if (this.settings.enableEditDurationKey) {
          this.setEditDurationBar(true, editor);
        }
      }
    });
  }
  registerLeafChangeEvent() {
    this.registerEvent(this.app.workspace.on("active-leaf-change", (leaf) => {
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
      if (activeView === null) {
        return;
      }
      const editor = activeView.editor;
      if (editor.hasFocus() === false) {
        return;
      }
      this.settings.enableEditDurationKey && this.settings.useCustomFrontmatterHandlingSolution && this.setEditDurationBar(true, editor);
    }));
  }
  registerKeyDownDOMEvent() {
    this.registerDomEvent(document, "keyup", (evt) => {
      if (evt.ctrlKey) {
        return;
      }
      if (this.settings.useCustomFrontmatterHandlingSolution === true) {
        const activeView = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
        if (activeView === null) {
          if (this.isDebugBuild) {
            console.log("No active view");
          }
          return;
        }
        const editor = activeView.editor;
        if (editor.hasFocus() === false) {
          if (this.isDebugBuild) {
            console.log("No focus");
          }
          return;
        }
        const dateNow = (0, import_obsidian3.moment)();
        const userDateFormat = this.settings.modifiedKeyFormat;
        const dateFormatted = dateNow.format(userDateFormat);
        const userModifiedKeyName = this.settings.modifiedKeyName;
        const valueLineNumber = getLine(editor, userModifiedKeyName);
        if (typeof valueLineNumber !== "number") {
          if (this.isDebugBuild) {
            console.log("Not a number");
          }
          return;
        }
        const value = editor.getLine(valueLineNumber).split(/:(.*)/s)[1].trim();
        if ((0, import_obsidian3.moment)(value, userDateFormat, true).isValid() === false) {
          if (this.isDebugBuild) {
            console.log("Wrong format");
          }
          return;
        }
        setValue2(editor, userModifiedKeyName, dateFormatted);
        if (this.settings.enableEditDurationKey) {
          this.allowEditDurationUpdate && this.updateEditDuration(editor);
          this.setEditDurationBar(true, editor);
        }
      }
    });
  }
  registerFileModificationEvent() {
    this.registerEvent(this.app.vault.on("modify", (file) => {
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
      if (activeView === null) {
        return;
      }
      const editor = activeView.editor;
      if (this.settings.useCustomFrontmatterHandlingSolution === false) {
        if (this.settings.enableEditDurationKey) {
          this.allowEditDurationUpdate && this.standardUpdateEditDuration(file);
          this.setEditDurationBar(false, file);
        }
        if (this.settings.enableModifiedKeyUpdate) {
          this.standardUpdateModifiedKey(file);
        }
      }
    }));
  }
  setUpStatusBarItems() {
    if (this.settings.enableClock) {
      this.clockBar = this.addStatusBarItem();
      this.clockBar.setText(":)");
      this.updateClockBar();
      this.registerInterval(
        window.setInterval(this.updateClockBar.bind(this), +this.settings.updateIntervalMilliseconds)
      );
    }
    if (this.isDebugBuild) {
      this.debugBar = this.addStatusBarItem();
      this.debugBar.setText("\u2622\uFE0F DEBUG BUILD \u2622\uFE0F");
    }
    if (this.settings.enableEditDurationKey) {
      this.editDurationBar = this.addStatusBarItem();
      this.editDurationBar.setText("\u231B");
    }
  }
  async setEditDurationBar(useCustomSolution, solution) {
    let value = 0;
    if (solution instanceof import_obsidian2.Editor) {
      let editor = solution;
      const fieldLine = getLine(editor, this.settings.editDurationPath);
      if (fieldLine === void 0) {
        this.editDurationBar.setText("\u231B --");
        return;
      }
      value = +editor.getLine(fieldLine).split(/:(.*)/s)[1].trim();
    }
    if (solution instanceof import_obsidian2.TAbstractFile) {
      let file = solution;
      await this.app.fileManager.processFrontMatter(file, (frontmatter) => {
        value = getValue(frontmatter, this.settings.editDurationPath);
        if (value === void 0) {
          value = 0;
        }
      });
    }
    let text = "";
    if (+value < 60) {
      text = `\u231B <1 m`;
    } else if (+value < 60 * 60) {
      const minutes = Math.floor(+value / 60);
      text = `\u231B ${minutes} m`;
    } else if (+value < 60 * 60 * 24) {
      const hours = Math.floor(+value / (60 * 60));
      const minutes = Math.floor((+value - hours * 60 * 60) / 60);
      text = `\u231B ${hours} h ${minutes} m`;
    } else {
      const days = Math.floor(+value / (24 * 60 * 60));
      const hours = Math.floor((+value - days * 24 * 60 * 60) / (60 * 60));
      text = `\u231B ${days} d ${hours} h`;
    }
    this.editDurationBar.setText(text);
  }
  async updateEditDuration(editor) {
    this.allowEditDurationUpdate = false;
    const fieldLine = getLine(editor, this.settings.editDurationPath);
    if (fieldLine === void 0) {
      this.allowEditDurationUpdate = true;
      return;
    }
    const value = editor.getLine(fieldLine).split(/:(.*)/s)[1].trim();
    const newValue = +value + 1;
    setValue2(editor, this.settings.editDurationPath, newValue.toString());
    await sleep(1e3 - this.settings.nonTypingEditingTimePercentage * 10);
    this.allowEditDurationUpdate = true;
  }
  async standardUpdateEditDuration(file) {
    this.allowEditDurationUpdate = false;
    await this.app.fileManager.processFrontMatter(file, (frontmatter) => {
      let value = getValue(frontmatter, this.settings.editDurationPath);
      if (value === void 0) {
        value = "0";
      }
      const newValue = +value + 10;
      setValue(frontmatter, this.settings.editDurationPath, newValue);
    });
    await sleep(1e4 - this.settings.nonTypingEditingTimePercentage * 100);
    this.allowEditDurationUpdate = true;
  }
  updateClockBar() {
    const dateNow = (0, import_obsidian3.moment)();
    const dateUTC = import_obsidian3.moment.utc();
    const dateChosen = this.settings.isUTC ? dateUTC : dateNow;
    const dateFormatted = dateChosen.format(this.settings.clockFormat);
    const emoji = momentToClockEmoji(dateChosen);
    this.clockBar.setText(emoji + " " + dateFormatted);
  }
  async standardUpdateModifiedKey(file) {
    await this.app.fileManager.processFrontMatter(file, (frontmatter) => {
      const dateNow = (0, import_obsidian3.moment)();
      const dateFormatted = dateNow.format(this.settings.modifiedKeyFormat);
      const updateKeyValue = (0, import_obsidian3.moment)(getValue(frontmatter, this.settings.modifiedKeyName), this.settings.modifiedKeyFormat);
      if (updateKeyValue.add(this.settings.updateIntervalFrontmatterMinutes, "minutes") > dateNow) {
        return;
      }
      setValue(frontmatter, this.settings.modifiedKeyName, dateFormatted);
    });
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL0JPTVMudHMiLCAic3JjL0NBTVMudHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy90aW1lLnV0aWxzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFRBYnN0cmFjdEZpbGUsIFRGaWxlLCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBtb21lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgKiBhcyBCT01TIGZyb20gJy4vQk9NUyc7XHJcbmltcG9ydCAqIGFzIENBTVMgZnJvbSAnLi9DQU1TJztcclxuaW1wb3J0IHtcclxuXHRERUZBVUxUX1NFVFRJTkdTLFxyXG5cdFRpbWVUaGluZ3NTZXR0aW5ncyxcclxuXHRUaW1lVGhpbmdzU2V0dGluZ3NUYWIsXHJcbn0gZnJvbSAnLi9zZXR0aW5ncyc7XHJcbmltcG9ydCAqIGFzIHRpbWVVdGlscyBmcm9tICcuL3RpbWUudXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZVRoaW5ncyBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3M6IFRpbWVUaGluZ3NTZXR0aW5ncztcclxuXHRpc0RlYnVnQnVpbGQ6IGJvb2xlYW47XHJcblx0Y2xvY2tCYXI6IEhUTUxFbGVtZW50OyAgICAvLyAjIFJlcXVpcmVkXHJcblx0ZGVidWdCYXI6IEhUTUxFbGVtZW50O1xyXG5cdGVkaXREdXJhdGlvbkJhcjogSFRNTEVsZW1lbnQ7XHJcblx0YWxsb3dFZGl0RHVyYXRpb25VcGRhdGU6IGJvb2xlYW47XHJcblx0aXNQcm9jY2Vzc2luZyA9IGZhbHNlO1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdC8vIFZhcmlhYmxlcyBpbml0aWFsaXphdGlvblxyXG5cdFx0dGhpcy5pc0RlYnVnQnVpbGQgPSBmYWxzZTsgICAgLy8gZm9yIGRlYnVnZ2luZyBwdXJwb3Nlc1xyXG5cdFx0dGhpcy5hbGxvd0VkaXREdXJhdGlvblVwZGF0ZSA9IHRydWU7XHJcblxyXG5cdFx0dGhpcy5zZXRVcFN0YXR1c0Jhckl0ZW1zKCk7XHJcblxyXG5cdFx0Ly8gRXZlbnRzIGluaXRpYWxpemF0aW9uXHJcblx0XHR0aGlzLnJlZ2lzdGVyRmlsZU1vZGlmaWNhdGlvbkV2ZW50KCk7XHJcblx0XHR0aGlzLnJlZ2lzdGVyS2V5RG93bkRPTUV2ZW50KCk7XHJcblx0XHR0aGlzLnJlZ2lzdGVyTGVhZkNoYW5nZUV2ZW50KCk7XHJcblx0XHR0aGlzLnJlZ2lzdGVyTW91c2VEb3duRE9NRXZlbnQoKTtcclxuXHRcdFxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBUaW1lVGhpbmdzU2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHR9XHJcblxyXG5cdHJlZ2lzdGVyTW91c2VEb3duRE9NRXZlbnQoKSB7XHJcblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdtb3VzZWRvd24nLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblxyXG5cdFx0XHQvLyBQcmVwYXJlIGV2ZXJ5dGhpbmdcclxuXHJcblx0XHRcdGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0XHRcdGlmIChhY3RpdmVWaWV3ID09PSBudWxsKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRjb25zdCBlZGl0b3I6IEVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xyXG5cdFx0XHRpZiAoZWRpdG9yLmhhc0ZvY3VzKCkgPT09IGZhbHNlKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDaGFuZ2UgdGhlIGR1cmF0aW9uIGljb24gaW4gc3RhdHVzIGJhclxyXG5cclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MudXNlQ3VzdG9tRnJvbnRtYXR0ZXJIYW5kbGluZ1NvbHV0aW9uID09PSB0cnVlKSB7XHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlRWRpdER1cmF0aW9uS2V5KSB7XHJcblx0XHRcdFx0XHR0aGlzLnNldEVkaXREdXJhdGlvbkJhcih0cnVlLCBlZGl0b3IpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRyZWdpc3RlckxlYWZDaGFuZ2VFdmVudCgpIHtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJhY3RpdmUtbGVhZi1jaGFuZ2VcIiwgKGxlYWYpID0+IHtcclxuXHJcblx0XHRcdC8vIFByZXBhcmUgZXZlcnl0aGluZ1xyXG5cclxuXHRcdFx0Y29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRcdGlmIChhY3RpdmVWaWV3ID09PSBudWxsKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xyXG5cdFx0XHRpZiAoZWRpdG9yLmhhc0ZvY3VzKCkgPT09IGZhbHNlKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDaGFuZ2UgdGhlIGR1cmF0aW9uIGljb24gaW4gc3RhdHVzIGJhclxyXG5cclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5lbmFibGVFZGl0RHVyYXRpb25LZXkgJiYgdGhpcy5zZXR0aW5ncy51c2VDdXN0b21Gcm9udG1hdHRlckhhbmRsaW5nU29sdXRpb24gJiYgdGhpcy5zZXRFZGl0RHVyYXRpb25CYXIodHJ1ZSwgZWRpdG9yKTtcclxuXHRcdH0pKTtcclxuXHR9XHJcblxyXG5cdHJlZ2lzdGVyS2V5RG93bkRPTUV2ZW50KCkge1xyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAna2V5dXAnLCAoZXZ0OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcblxyXG5cdFx0XHQvLyBJZiBDQU1TIGVuYWJsZWRcclxuXHJcblx0XHRcdGlmIChldnQuY3RybEtleSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MudXNlQ3VzdG9tRnJvbnRtYXR0ZXJIYW5kbGluZ1NvbHV0aW9uID09PSB0cnVlKSB7XHJcblxyXG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgZG9jdW1lbnQgaXMgcmVhZHkgZm9yIGVkaXRcclxuXHJcblx0XHRcdFx0Y29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRcdFx0aWYgKGFjdGl2ZVZpZXcgPT09IG51bGwpIHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLmlzRGVidWdCdWlsZCkge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIk5vIGFjdGl2ZSB2aWV3XCIpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjb25zdCBlZGl0b3I6IEVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xyXG5cdFx0XHRcdGlmIChlZGl0b3IuaGFzRm9jdXMoKSA9PT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLmlzRGVidWdCdWlsZCkge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIk5vIGZvY3VzXCIpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gVXBkYXRlIFwidXBkYXRlZF9hdFwiXHJcblxyXG5cdFx0XHRcdGNvbnN0IGRhdGVOb3cgPSBtb21lbnQoKTtcclxuXHRcdFx0XHRjb25zdCB1c2VyRGF0ZUZvcm1hdCA9IHRoaXMuc2V0dGluZ3MubW9kaWZpZWRLZXlGb3JtYXQ7XHJcblx0XHRcdFx0Y29uc3QgZGF0ZUZvcm1hdHRlZCA9IGRhdGVOb3cuZm9ybWF0KHVzZXJEYXRlRm9ybWF0KTtcclxuXHRcdFx0XHRjb25zdCB1c2VyTW9kaWZpZWRLZXlOYW1lID0gdGhpcy5zZXR0aW5ncy5tb2RpZmllZEtleU5hbWU7XHJcblx0XHRcdFx0Y29uc3QgdmFsdWVMaW5lTnVtYmVyID0gQ0FNUy5nZXRMaW5lKGVkaXRvciwgdXNlck1vZGlmaWVkS2V5TmFtZSk7XHJcblx0XHRcdFx0aWYgKHR5cGVvZiB2YWx1ZUxpbmVOdW1iZXIgIT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5pc0RlYnVnQnVpbGQpIHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJOb3QgYSBudW1iZXJcIik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNvbnN0IHZhbHVlID0gZWRpdG9yLmdldExpbmUodmFsdWVMaW5lTnVtYmVyKS5zcGxpdCgvOiguKikvcylbMV0udHJpbSgpO1xyXG5cdFx0XHRcdGlmIChtb21lbnQodmFsdWUsIHVzZXJEYXRlRm9ybWF0LCB0cnVlKS5pc1ZhbGlkKCkgPT09IGZhbHNlKSB7ICAgIC8vIExpdHRsZSBzYWZlY2hlY2sgaW4gcGxhY2UgdG8gcmVkdWNlIGNoYW5jZSBvZiBidWdzXHJcblx0XHRcdFx0XHRpZiAodGhpcy5pc0RlYnVnQnVpbGQpIHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJXcm9uZyBmb3JtYXRcIik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdENBTVMuc2V0VmFsdWUoZWRpdG9yLCB1c2VyTW9kaWZpZWRLZXlOYW1lLCBkYXRlRm9ybWF0dGVkKTtcclxuXHJcblx0XHRcdFx0Ly8gVXBkYXRlIGR1cmF0aW9uIGljb24gaW4gc3RhdHVzIGJhclxyXG5cclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVFZGl0RHVyYXRpb25LZXkpIHtcclxuXHRcdFx0XHRcdHRoaXMuYWxsb3dFZGl0RHVyYXRpb25VcGRhdGUgJiYgdGhpcy51cGRhdGVFZGl0RHVyYXRpb24oZWRpdG9yKTtcclxuXHRcdFx0XHRcdHRoaXMuc2V0RWRpdER1cmF0aW9uQmFyKHRydWUsIGVkaXRvcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJlZ2lzdGVyRmlsZU1vZGlmaWNhdGlvbkV2ZW50KCkge1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKCdtb2RpZnknLCAoZmlsZSkgPT4ge1xyXG5cclxuXHRcdFx0Ly8gTWFrZSBldmVyeXRoaW5nIHJlYWR5IGZvciBlZGl0XHJcblxyXG5cdFx0XHRjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdFx0aWYgKGFjdGl2ZVZpZXcgPT09IG51bGwpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0Y29uc3QgZWRpdG9yOiBFZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcclxuXHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnVzZUN1c3RvbUZyb250bWF0dGVySGFuZGxpbmdTb2x1dGlvbiA9PT0gZmFsc2UpIHtcclxuXHJcblx0XHRcdFx0Ly8gSWYgQ0FNUyBkaXNhYmxlZFxyXG5cclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVFZGl0RHVyYXRpb25LZXkpIHtcclxuXHJcblx0XHRcdFx0XHQvLyBVcGRhdGUgZHVyYXRpb24gaWNvbiBpbiBzdGF0dXMgYmFyXHJcblxyXG5cdFx0XHRcdFx0dGhpcy5hbGxvd0VkaXREdXJhdGlvblVwZGF0ZSAmJiB0aGlzLnN0YW5kYXJkVXBkYXRlRWRpdER1cmF0aW9uKGZpbGUpO1xyXG5cdFx0XHRcdFx0dGhpcy5zZXRFZGl0RHVyYXRpb25CYXIoZmFsc2UsIGZpbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVNb2RpZmllZEtleVVwZGF0ZSlcclxuXHRcdFx0XHR7XHJcblxyXG5cdFx0XHRcdFx0Ly8gVXBkYXRlIFwidXBkYXRlZF9hdFwiXHJcblxyXG5cdFx0XHRcdFx0dGhpcy5zdGFuZGFyZFVwZGF0ZU1vZGlmaWVkS2V5KGZpbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSkpO1xyXG5cdH1cclxuXHJcblx0c2V0VXBTdGF0dXNCYXJJdGVtcygpIHtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZUNsb2NrKSB7IC8vIEFkZCBjbG9jayBpY29uXHJcblx0XHRcdC8vIEFkZHMgYSBzdGF0dXMgYmFyXHJcblx0XHRcdHRoaXMuY2xvY2tCYXIgPSB0aGlzLmFkZFN0YXR1c0Jhckl0ZW0oKTtcclxuXHRcdFx0dGhpcy5jbG9ja0Jhci5zZXRUZXh0KFwiOilcIilcclxuXHJcblx0XHRcdC8vIENoYW5nZSBzdGF0dXMgYmFyIHRleHQgZXZlcnkgc2Vjb25kXHJcblx0XHRcdHRoaXMudXBkYXRlQ2xvY2tCYXIoKTtcclxuXHRcdFx0dGhpcy5yZWdpc3RlckludGVydmFsKFxyXG5cdFx0XHRcdHdpbmRvdy5zZXRJbnRlcnZhbCh0aGlzLnVwZGF0ZUNsb2NrQmFyLmJpbmQodGhpcyksICt0aGlzLnNldHRpbmdzLnVwZGF0ZUludGVydmFsTWlsbGlzZWNvbmRzKVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLmlzRGVidWdCdWlsZCkgeyAvLyBBZGQgREVCVUcgaWNvblxyXG5cdFx0XHR0aGlzLmRlYnVnQmFyID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XHJcblx0XHRcdHRoaXMuZGVidWdCYXIuc2V0VGV4dChcIlx1MjYyMlx1RkUwRiBERUJVRyBCVUlMRCBcdTI2MjJcdUZFMEZcIilcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVFZGl0RHVyYXRpb25LZXkpIHsgLy8gQWQgZHVyYXRpb24gaWNvblxyXG5cdFx0XHR0aGlzLmVkaXREdXJhdGlvbkJhciA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xyXG5cdFx0XHR0aGlzLmVkaXREdXJhdGlvbkJhci5zZXRUZXh0KFwiXHUyMzFCXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c2V0RWRpdER1cmF0aW9uQmFyKHVzZUN1c3RvbVNvbHV0aW9uOiBmYWxzZSwgc29sdXRpb246IFRBYnN0cmFjdEZpbGUpOiB2b2lkO1xyXG5cdHNldEVkaXREdXJhdGlvbkJhcih1c2VDdXN0b21Tb2x1dGlvbjogdHJ1ZSwgc29sdXRpb246IEVkaXRvcik6IHZvaWQ7XHJcblx0YXN5bmMgc2V0RWRpdER1cmF0aW9uQmFyKHVzZUN1c3RvbVNvbHV0aW9uOiBib29sZWFuLCBzb2x1dGlvbjogRWRpdG9yIHwgVEFic3RyYWN0RmlsZSkgeyAvLyB3aGF0IHRoZSBoZWxsIGlzIHRoaXMgbW9uc3Ryb3NpdHlcclxuXHRcdGxldCB2YWx1ZSA9IDA7XHJcblx0XHRpZiAoc29sdXRpb24gaW5zdGFuY2VvZiBFZGl0b3IpIHtcclxuXHRcdFx0bGV0IGVkaXRvciA9IHNvbHV0aW9uO1xyXG5cdFx0XHRjb25zdCBmaWVsZExpbmUgPSBDQU1TLmdldExpbmUoZWRpdG9yLCB0aGlzLnNldHRpbmdzLmVkaXREdXJhdGlvblBhdGgpO1xyXG5cdFx0XHRpZiAoZmllbGRMaW5lID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHR0aGlzLmVkaXREdXJhdGlvbkJhci5zZXRUZXh0KFwiXHUyMzFCIC0tXCIpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHR2YWx1ZSA9ICtlZGl0b3IuZ2V0TGluZShmaWVsZExpbmUpLnNwbGl0KC86KC4qKS9zKVsxXS50cmltKCk7XHJcblx0XHR9XHJcblx0XHRpZiAoc29sdXRpb24gaW5zdGFuY2VvZiBUQWJzdHJhY3RGaWxlKSB7XHJcblx0XHRcdGxldCBmaWxlID0gc29sdXRpb247XHJcblx0XHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlIGFzIFRGaWxlLCAoZnJvbnRtYXR0ZXIpID0+IHtcclxuXHRcdFx0XHR2YWx1ZSA9IEJPTVMuZ2V0VmFsdWUoZnJvbnRtYXR0ZXIsIHRoaXMuc2V0dGluZ3MuZWRpdER1cmF0aW9uUGF0aCk7XHJcblx0XHRcdFx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcdHZhbHVlID0gMDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHR9XHJcblx0XHRsZXQgdGV4dCA9IFwiXCI7XHJcblx0XHRpZiAoK3ZhbHVlIDwgNjApIHtcclxuXHRcdFx0dGV4dCA9IGBcdTIzMUIgPDEgbWA7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmICgrdmFsdWUgPCA2MCAqIDYwKSB7XHJcblx0XHRcdGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKCt2YWx1ZSAvIDYwKTtcclxuXHRcdFx0dGV4dCA9IGBcdTIzMUIgJHttaW51dGVzfSBtYDtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKCt2YWx1ZSA8IDYwICogNjAgKiAyNCkge1xyXG5cdFx0XHRjb25zdCBob3VycyA9IE1hdGguZmxvb3IoK3ZhbHVlIC8gKDYwICogNjApKTtcclxuXHRcdFx0Y29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKCt2YWx1ZSAtIChob3VycyAqIDYwICogNjApKSAvIDYwKTtcclxuXHRcdFx0dGV4dCA9IGBcdTIzMUIgJHtob3Vyc30gaCAke21pbnV0ZXN9IG1gO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGNvbnN0IGRheXMgPSBNYXRoLmZsb29yKCt2YWx1ZSAvICgyNCAqIDYwICogNjApKTtcclxuXHRcdFx0Y29uc3QgaG91cnMgPSBNYXRoLmZsb29yKCgrdmFsdWUgLSAoZGF5cyAqIDI0ICogNjAgKiA2MCkpIC8gKDYwICogNjApKTtcclxuXHRcdFx0dGV4dCA9IGBcdTIzMUIgJHtkYXlzfSBkICR7aG91cnN9IGhgO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5lZGl0RHVyYXRpb25CYXIuc2V0VGV4dCh0ZXh0KTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHVwZGF0ZUVkaXREdXJhdGlvbihlZGl0b3I6IEVkaXRvcikge1xyXG5cclxuXHRcdC8vIFByZXBhcmUgZXZlcnl0aGluZ1xyXG5cclxuXHRcdHRoaXMuYWxsb3dFZGl0RHVyYXRpb25VcGRhdGUgPSBmYWxzZTtcclxuXHRcdGNvbnN0IGZpZWxkTGluZSA9IENBTVMuZ2V0TGluZShlZGl0b3IsIHRoaXMuc2V0dGluZ3MuZWRpdER1cmF0aW9uUGF0aCk7XHJcblx0XHRpZiAoZmllbGRMaW5lID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0dGhpcy5hbGxvd0VkaXREdXJhdGlvblVwZGF0ZSA9IHRydWU7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJbmNyZW1lbnRcclxuXHJcblx0XHRjb25zdCB2YWx1ZSA9IGVkaXRvci5nZXRMaW5lKGZpZWxkTGluZSkuc3BsaXQoLzooLiopL3MpWzFdLnRyaW0oKTtcclxuXHRcdGNvbnN0IG5ld1ZhbHVlID0gK3ZhbHVlICsgMTtcclxuXHRcdENBTVMuc2V0VmFsdWUoZWRpdG9yLCB0aGlzLnNldHRpbmdzLmVkaXREdXJhdGlvblBhdGgsIG5ld1ZhbHVlLnRvU3RyaW5nKCkpO1xyXG5cclxuXHRcdC8vIENvb2wgZG93blxyXG5cclxuXHRcdGF3YWl0IHNsZWVwKDEwMDAgLSAodGhpcy5zZXR0aW5ncy5ub25UeXBpbmdFZGl0aW5nVGltZVBlcmNlbnRhZ2UgKiAxMCkpO1xyXG5cdFx0dGhpcy5hbGxvd0VkaXREdXJhdGlvblVwZGF0ZSA9IHRydWU7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzdGFuZGFyZFVwZGF0ZUVkaXREdXJhdGlvbihmaWxlOiBUQWJzdHJhY3RGaWxlKSB7XHJcblxyXG5cdFx0Ly8gUHJlcGFyZSBldmVyeXRoaW5nXHJcblxyXG5cdFx0dGhpcy5hbGxvd0VkaXREdXJhdGlvblVwZGF0ZSA9IGZhbHNlO1xyXG5cdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUgYXMgVEZpbGUsIChmcm9udG1hdHRlcikgPT4ge1xyXG5cdFx0XHRsZXQgdmFsdWUgPSBCT01TLmdldFZhbHVlKGZyb250bWF0dGVyLCB0aGlzLnNldHRpbmdzLmVkaXREdXJhdGlvblBhdGgpO1xyXG5cdFx0XHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdHZhbHVlID0gXCIwXCI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEluY3JlbWVudFxyXG5cclxuXHRcdFx0Y29uc3QgbmV3VmFsdWUgPSArdmFsdWUgKyAxMDtcclxuXHRcdFx0Qk9NUy5zZXRWYWx1ZShmcm9udG1hdHRlciwgdGhpcy5zZXR0aW5ncy5lZGl0RHVyYXRpb25QYXRoLCBuZXdWYWx1ZSk7XHJcblx0XHR9KVxyXG5cclxuXHRcdC8vIENvb2wgZG93blxyXG5cclxuXHRcdGF3YWl0IHNsZWVwKDEwMDAwIC0gKHRoaXMuc2V0dGluZ3Mubm9uVHlwaW5nRWRpdGluZ1RpbWVQZXJjZW50YWdlICogMTAwKSk7XHJcblx0XHR0aGlzLmFsbG93RWRpdER1cmF0aW9uVXBkYXRlID0gdHJ1ZTtcclxuXHR9XHJcblx0XHJcblx0dXBkYXRlQ2xvY2tCYXIoKSB7XHJcblx0XHRjb25zdCBkYXRlTm93ID0gbW9tZW50KCk7XHJcblx0XHRjb25zdCBkYXRlVVRDID0gbW9tZW50LnV0YygpOyAgICAvLyBDb252ZXJ0IHRvIFVUQyB0aW1lXHJcblxyXG5cdFx0Y29uc3QgZGF0ZUNob3NlbiA9IHRoaXMuc2V0dGluZ3MuaXNVVEMgPyBkYXRlVVRDIDogZGF0ZU5vdztcclxuXHRcdGNvbnN0IGRhdGVGb3JtYXR0ZWQgPSBkYXRlQ2hvc2VuLmZvcm1hdCh0aGlzLnNldHRpbmdzLmNsb2NrRm9ybWF0KTtcclxuXHRcdGNvbnN0IGVtb2ppID0gdGltZVV0aWxzLm1vbWVudFRvQ2xvY2tFbW9qaShkYXRlQ2hvc2VuKTtcclxuXHJcblx0XHR0aGlzLmNsb2NrQmFyLnNldFRleHQoZW1vamkgKyBcIiBcIiArIGRhdGVGb3JtYXR0ZWQpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc3RhbmRhcmRVcGRhdGVNb2RpZmllZEtleShmaWxlOiBUQWJzdHJhY3RGaWxlKSB7XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUgYXMgVEZpbGUsIChmcm9udG1hdHRlcikgPT4ge1xyXG5cdFx0XHRjb25zdCBkYXRlTm93ID0gbW9tZW50KCk7XHJcblx0XHRcdGNvbnN0IGRhdGVGb3JtYXR0ZWQgPSBkYXRlTm93LmZvcm1hdCh0aGlzLnNldHRpbmdzLm1vZGlmaWVkS2V5Rm9ybWF0KTtcclxuXHJcblx0XHRcdGNvbnN0IHVwZGF0ZUtleVZhbHVlID0gbW9tZW50KEJPTVMuZ2V0VmFsdWUoZnJvbnRtYXR0ZXIsIHRoaXMuc2V0dGluZ3MubW9kaWZpZWRLZXlOYW1lKSwgdGhpcy5zZXR0aW5ncy5tb2RpZmllZEtleUZvcm1hdCk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAodXBkYXRlS2V5VmFsdWUuYWRkKHRoaXMuc2V0dGluZ3MudXBkYXRlSW50ZXJ2YWxGcm9udG1hdHRlck1pbnV0ZXMsICdtaW51dGVzJykgPiBkYXRlTm93KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRCT01TLnNldFZhbHVlKGZyb250bWF0dGVyLCB0aGlzLnNldHRpbmdzLm1vZGlmaWVkS2V5TmFtZSwgZGF0ZUZvcm1hdHRlZCk7XHJcblx0XHR9KVxyXG5cdH1cclxuXHRcclxuXHRvbnVubG9hZCgpIHtcclxuXHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG59IiwgImltcG9ydCB7IFRBYnN0cmFjdEZpbGUsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBtb21lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBUaW1lVGhpbmdzIGZyb20gJy4vbWFpbidcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZShvYmo6IGFueSwgZmllbGRQYXRoOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGtleXMgPSBmaWVsZFBhdGguc3BsaXQoJy4nKTtcclxuICAgIGxldCB2YWx1ZSA9IG9iajtcclxuICBcclxuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcclxuICAgICAgdmFsdWUgPSB2YWx1ZVtrZXldO1xyXG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRWYWx1ZShvYmo6IGFueSwgcGF0aDogc3RyaW5nLCB2YWx1ZTogYW55KSB7XHJcbiAgICBjb25zdCBrZXlzID0gcGF0aC5zcGxpdCgnLicpO1xyXG4gICAgbGV0IGN1cnJlbnRMZXZlbCA9IG9iajtcclxuICBcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcclxuICAgICAgaWYgKCFjdXJyZW50TGV2ZWxba2V5XSkge1xyXG4gICAgICAgIGN1cnJlbnRMZXZlbFtrZXldID0ge307XHJcbiAgICAgIH1cclxuICAgICAgY3VycmVudExldmVsID0gY3VycmVudExldmVsW2tleV07XHJcbiAgICB9XHJcblxyXG4gICAgY3VycmVudExldmVsW2tleXNba2V5cy5sZW5ndGggLSAxXV0gPSB2YWx1ZTtcclxufSIsICJpbXBvcnQgeyBFZGl0b3IsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IG1vbWVudCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0xpbmVJbmRlbnRlZChsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICByZXR1cm4gL15bXFxzXFx0XS8udGVzdChsaW5lKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRnJvbnRtYXR0ZXJQcmVzZW50KGVkaXRvcjogRWRpdG9yKTogYm9vbGVhbiB7XHJcbiAgaWYgKGVkaXRvci5nZXRMaW5lKDApICE9PSBcIi0tLVwiKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IGVkaXRvci5sYXN0TGluZSgpOyBpKyspIHtcclxuICAgIGlmIChlZGl0b3IuZ2V0TGluZShpKSA9PT0gXCItLS1cIikge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZnJvbnRtYXR0ZXJFbmRMaW5lKGVkaXRvcjogRWRpdG9yKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcclxuICBpZiAoaXNGcm9udG1hdHRlclByZXNlbnQoZWRpdG9yKSkge1xyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gZWRpdG9yLmxhc3RMaW5lKCk7IGkrKykge1xyXG4gICAgICBpZiAoZWRpdG9yLmdldExpbmUoaSkgPT09IFwiLS0tXCIpIHtcclxuICAgICAgICByZXR1cm4gaTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gdW5kZWZpbmVkOyAvLyAjIEVuZCBsaW5lIG5vdCBmb3VuZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGluZShlZGl0b3I6IEVkaXRvciwgZmllbGRQYXRoOiBzdHJpbmcpOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gIGNvbnN0IGZyb250bWF0dGVyTGluZSA9IGZyb250bWF0dGVyRW5kTGluZShlZGl0b3IpO1xyXG4gIGNvbnN0IGtleXMgPSBmaWVsZFBhdGguc3BsaXQoJy4nKTtcclxuICBjb25zdCBkZXB0aCA9IGtleXMubGVuZ3RoO1xyXG5cclxuICBpZiAoZnJvbnRtYXR0ZXJMaW5lID09PSB1bmRlZmluZWQpIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBsZXQgdGFyZ2V0RGVwdGggPSAxO1xyXG4gIGxldCBjdXJyZW50RGVwdGggPSAxO1xyXG4gIGxldCBzdGFydExpbmUgPSAxO1xyXG4gIGxldCBlbWVyZ2luZ1BhdGggPSBbXTtcclxuXHJcbiAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xyXG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0TGluZTsgaSA8PSBmcm9udG1hdHRlckxpbmU7IGkrKykge1xyXG5cclxuICAgICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShpKTtcclxuICAgICAgY29uc3QgY3VycmVudEZpZWxkID0gY3VycmVudExpbmUuc3BsaXQoJzonKTtcclxuICAgICAgY29uc3QgY3VycmVudEZpZWxkTmFtZSA9IGN1cnJlbnRGaWVsZFswXS50cmltKCk7XHJcblxyXG4gICAgICBpZiAoY3VycmVudEZpZWxkTmFtZSA9PT0ga2V5KSB7XHJcbiAgICAgICAgZW1lcmdpbmdQYXRoLnB1c2goY3VycmVudEZpZWxkTmFtZSk7XHJcbiAgICAgICAgbGV0IHRhcmdldFBhdGggPSBmaWVsZFBhdGguc3BsaXQoJy4nKTtcclxuICAgICAgICBsZXQgdGFyZ2V0UGF0aFNocmluayA9IHRhcmdldFBhdGguc2xpY2UoMCwgZW1lcmdpbmdQYXRoLmxlbmd0aCk7XHJcbiAgICAgICAgaWYgKHRhcmdldFBhdGhTaHJpbmsuam9pbignLicpID09PSBlbWVyZ2luZ1BhdGguam9pbignLicpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgZW1lcmdpbmdQYXRoLnBvcCgpO1xyXG4gICAgICAgICAgc3RhcnRMaW5lID0gaSArIDE7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBpZiAoZW1lcmdpbmdQYXRoLmpvaW4oJy4nKSA9PT0gZmllbGRQYXRoKSB7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXREZXB0aCA+IDEpIHtcclxuICAgICAgICAgICAgICBpZiAodGhpcy5pc0xpbmVJbmRlbnRlZChjdXJyZW50TGluZSkgPT09IGZhbHNlKSB7ICAgIC8vIG1ldCBmaXJzdCBsZXZlbCB2YXJpYWJsZSwgb2J2aW91c2x5IHJldHVyblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKGlzTGluZUluZGVudGVkKGN1cnJlbnRMaW5lKSkge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRMaW5lID0gaSArIDE7XHJcbiAgICAgICAgICAgICAgICBlbWVyZ2luZ1BhdGggPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHN0YXJ0TGluZSA9IGkgKyAxO1xyXG4gICAgICAgICAgdGFyZ2V0RGVwdGggKz0gMTtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFZhbHVlKGVkaXRvcjogRWRpdG9yLCBmaWVsZFBhdGg6IHN0cmluZywgZmllbGRWYWx1ZTogc3RyaW5nKSB7IC8vIFRoZSB0aGluZyB3aXRoIHRoaXMgZnVuY3Rpb24gaXMgdGhhdCBpdCB1c2VzIHRoZSBmb3JtYXQgZnJvbSBzZXR0aW5ncyB0byBjaGVjayBhZ2FpbnN0LiBJIGNhbiBtYWtlIGl0IGFzIGFuIGFyZ3VtZW50IHRoYXQgY2FuIGJlIHBhc3NlZCwgb3IgYmV0dGVyIHlldCwgZXJhZGljYXRlIHRoZSBjaGVjayBmcm9tIHRoZSBmdW5jdGlvbiB0byBtYWtlIGl0IG1vcmUgYXRvbWljIGFuZCBwbGFjZSBpdCBzb21ld2hlcmUgZWxzZSBpbiB0aGUgbWFpbiBjb2RlLlxyXG4gIGNvbnN0IGZpZWxkTGluZSA9IGdldExpbmUoZWRpdG9yLCBmaWVsZFBhdGgpO1xyXG4gIGlmIChmaWVsZExpbmUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBjb25zdCBpbml0aWFsTGluZSA9IGVkaXRvci5nZXRMaW5lKGZpZWxkTGluZSkuc3BsaXQoJzonLCAxKTtcclxuICBjb25zdCBuZXdMaW5lID0gaW5pdGlhbExpbmVbMF0gKyBcIjogXCIgKyBmaWVsZFZhbHVlO1xyXG4gIGVkaXRvci5zZXRMaW5lKGZpZWxkTGluZSwgbmV3TGluZSk7XHJcbn0iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZWFyY2hDb21wb25lbnQsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBUaW1lVGhpbmdzIGZyb20gJy4vbWFpbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVUaGluZ3NTZXR0aW5ncyB7XHJcblx0Y2xvY2tGb3JtYXQ6IHN0cmluZztcclxuXHRpc1VUQzogYm9vbGVhbjtcclxuXHR1cGRhdGVJbnRlcnZhbE1pbGxpc2Vjb25kczogc3RyaW5nO1xyXG5cdG1vZGlmaWVkS2V5TmFtZTogc3RyaW5nO1xyXG5cdG1vZGlmaWVkS2V5Rm9ybWF0OiBzdHJpbmc7XHJcblx0ZW5hYmxlQ2xvY2s6IGJvb2xlYW47XHJcblx0ZW5hYmxlTW9kaWZpZWRLZXlVcGRhdGU6IGJvb2xlYW47XHJcblx0dXNlQ3VzdG9tRnJvbnRtYXR0ZXJIYW5kbGluZ1NvbHV0aW9uOiBib29sZWFuO1xyXG5cdHVwZGF0ZUludGVydmFsRnJvbnRtYXR0ZXJNaW51dGVzOiBudW1iZXI7XHJcblx0ZWRpdER1cmF0aW9uUGF0aDogc3RyaW5nLFxyXG5cdGVuYWJsZUVkaXREdXJhdGlvbktleTogYm9vbGVhbixcclxuXHRub25UeXBpbmdFZGl0aW5nVGltZVBlcmNlbnRhZ2U6IG51bWJlcixcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFRpbWVUaGluZ3NTZXR0aW5ncyA9IHtcclxuXHRjbG9ja0Zvcm1hdDogJ2hoOm1tIEEnLFxyXG5cdHVwZGF0ZUludGVydmFsTWlsbGlzZWNvbmRzOiAnMTAwMCcsXHJcblx0aXNVVEM6IGZhbHNlLFxyXG5cdG1vZGlmaWVkS2V5TmFtZTogJ3VwZGF0ZWRfYXQnLFxyXG5cdG1vZGlmaWVkS2V5Rm9ybWF0OiAnWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1onLFxyXG5cdGVuYWJsZUNsb2NrOiB0cnVlLFxyXG5cdGVuYWJsZU1vZGlmaWVkS2V5VXBkYXRlOiB0cnVlLFxyXG5cdHVzZUN1c3RvbUZyb250bWF0dGVySGFuZGxpbmdTb2x1dGlvbjogZmFsc2UsXHJcblx0dXBkYXRlSW50ZXJ2YWxGcm9udG1hdHRlck1pbnV0ZXM6IDEsXHJcblx0ZWRpdER1cmF0aW9uUGF0aDogXCJlZGl0ZWRfc2Vjb25kc1wiLFxyXG5cdGVuYWJsZUVkaXREdXJhdGlvbktleTogdHJ1ZSxcclxuXHRub25UeXBpbmdFZGl0aW5nVGltZVBlcmNlbnRhZ2U6IDIyLFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZVRoaW5nc1NldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBUaW1lVGhpbmdzO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBUaW1lVGhpbmdzXHJcblx0KSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdGNvbnN0IGNyZWF0ZUxpbmsgPSAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IGxpbmtFbCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHJcblx0XHRcdGxpbmtFbC5hcHBlbmQoXHJcblx0XHRcdFx0bGlua0VsLmNyZWF0ZUVsKCdhJywge1xyXG5cdFx0XHRcdFx0aHJlZjogJ2h0dHBzOi8vbW9tZW50anNjb20ucmVhZHRoZWRvY3MuaW8vZW4vbGF0ZXN0L21vbWVudC8wNC1kaXNwbGF5aW5nLzAxLWZvcm1hdC8nLFxyXG5cdFx0XHRcdFx0dGV4dDogJ01vbWVudC5qcyBkYXRlIGZvcm1hdCBkb2N1bWVudGF0aW9uJ1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdClcclxuXHRcdFx0cmV0dXJuIGxpbmtFbDtcclxuXHRcdH1cclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1VzZSBjdXN0b20gZnJvbnRtYXR0ZXIgaGFuZGxpbmcgc29sdXRpb24nKVxyXG5cdFx0XHQuc2V0RGVzYygnU21vb3RoZXIgZXhwZXJpZW5lLiBQcm9uZSB0byBidWdzIGlmIHlvdSB1c2UgYSBuZXN0ZWQgdmFsdWUuJylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZUN1c3RvbUZyb250bWF0dGVySGFuZGxpbmdTb2x1dGlvbilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAobmV3VmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlQ3VzdG9tRnJvbnRtYXR0ZXJIYW5kbGluZ1NvbHV0aW9uID0gbmV3VmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdH0pLFxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMScsIHsgdGV4dDogJ1N0YXR1cyBiYXInIH0pO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdEaXNwbGF5cyBjbG9jayBpbiB0aGUgc3RhdHVzIGJhci4nIH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRW5hYmxlIHN0YXR1cyBiYXIgY2xvY2snKVxyXG5cdFx0XHQuc2V0RGVzYygnU2hvdyBjbG9jayBvbiB0aGUgc3RhdHVzIGJhcj8gVGhpcyBzZXR0aW5nIHJlcXVpcmVzIHJlc3RhcnQgb2YgdGhlIHBsdWdpbi4nKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ2xvY2spXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKG5ld1ZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNsb2NrID0gbmV3VmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHR9KSxcclxuXHRcdFx0KTtcclxuXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ2xvY2sgPT09IHRydWUpIHtcclxuXHRcdFx0XHJcblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHRcdC5zZXROYW1lKCdEYXRlIGZvcm1hdCcpXHJcblx0XHRcdFx0LnNldERlc2MoY3JlYXRlTGluaygpKVxyXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdoaDptbSBBJylcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jbG9ja0Zvcm1hdClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xvY2tGb3JtYXQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZSgnVXBkYXRlIGludGVydmFsJylcclxuXHRcdFx0XHQuc2V0RGVzYygnSW4gbWlsbGlzZWNvbmRzLiBSZXN0YXJ0IHBsdWdpbiBmb3IgdGhpcyBzZXR0aW5nIHRvIHRha2UgZWZmZWN0LicpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJzEwMDAnKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVwZGF0ZUludGVydmFsTWlsbGlzZWNvbmRzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy51cGRhdGVJbnRlcnZhbE1pbGxpc2Vjb25kcyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHRcclxuXHRcdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LnNldE5hbWUoJ1VUQyB0aW1lem9uZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ1VzZSBVVEMgaW5zdGVhZCBvZiBsb2NhbCB0aW1lPycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc1VUQylcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChuZXdWYWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmlzVVRDID0gbmV3VmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pLFxyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDEnLCB7IHRleHQ6ICdGcm9udG1hdHRlcicgfSk7XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0hhbmRsZXMgdGltZXN0YW1wIGtleXMgaW4gZnJvbnRtYXR0ZXIuJyB9KTtcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1RDgzRFx1REQxMSBNb2RpZmllZCcgfSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdFbmFibGUgdXBkYXRlIG9mIHRoZSBtb2RpZmllZCBrZXknKVxyXG5cdFx0XHQuc2V0RGVzYygnJylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZU1vZGlmaWVkS2V5VXBkYXRlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChuZXdWYWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVNb2RpZmllZEtleVVwZGF0ZSA9IG5ld1ZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHR9KSxcclxuXHRcdFx0KTtcclxuXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlTW9kaWZpZWRLZXlVcGRhdGUgPT09IHRydWUpIHtcclxuXHJcblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnTW9kaWZpZWQga2V5IG5hbWUnKVxyXG5cdFx0XHQuc2V0RGVzYygnU3VwcG9ydHMgbmVzdGVkIGtleXMuIEZvciBleGFtcGxlIGB0aW1ldGhpbmdzLnVwZGF0ZWRfYXRgJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCd1cGRhdGVkX2F0JylcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kaWZpZWRLZXlOYW1lKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGlmaWVkS2V5TmFtZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcclxuXHRcdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdNb2RpZmllZCBrZXkgZm9ybWF0JylcclxuXHRcdFx0LnNldERlc2MoY3JlYXRlTGluaygpKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ1lZWVktTU0tRERbVF1ISDptbTpzcy5TU1NaJylcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kaWZpZWRLZXlGb3JtYXQpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kaWZpZWRLZXlGb3JtYXQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlQ3VzdG9tRnJvbnRtYXR0ZXJIYW5kbGluZ1NvbHV0aW9uID09PSBmYWxzZSkge1xyXG5cclxuXHRcdFx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZSgnSW50ZXJ2YWwgYmV0d2VlbiB1cGRhdGVzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnT25seSBmb3IgT2JzaWRpYW4gZnJvbnRtYXR0ZXIgQVBJLicpXHJcblx0XHRcdFx0LmFkZFNsaWRlcigoc2xpZGVyKSA9PlxyXG5cdFx0XHRcdFx0c2xpZGVyXHJcblx0XHRcdFx0XHRcdC5zZXRMaW1pdHMoMSwgMTUsIDEpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51cGRhdGVJbnRlcnZhbEZyb250bWF0dGVyTWludXRlcylcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnVwZGF0ZUludGVydmFsRnJvbnRtYXR0ZXJNaW51dGVzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0ICB9KVxyXG5cdFx0XHRcdC5zZXREeW5hbWljVG9vbHRpcCgpLFxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVEODNEXHVERDExIEVkaXQgZHVyYXRpb24nIH0pO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdUcmFjayBmb3IgaG93IGxvbmcgeW91IGhhdmUgYmVlbiBlZGl0aW5nIGEgbm90ZS4nIH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRW5hYmxlIGVkaXQgZHVyYXRpb24ga2V5JylcclxuXHRcdFx0LnNldERlc2MoJycpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFZGl0RHVyYXRpb25LZXkpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKG5ld1ZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUVkaXREdXJhdGlvbktleSA9IG5ld1ZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHRcdC8vIGF3YWl0IHRoaXMucGx1Z2luLmVkaXREdXJhdGlvbkJhci50b2dnbGUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRWRpdER1cmF0aW9uS2V5KTtcclxuXHRcdH0pLCk7XHJcblxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUVkaXREdXJhdGlvbktleSA9PT0gdHJ1ZSkge1xyXG5cclxuXHRcdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdFZGl0IGR1cmF0aW9uIGtleSBuYW1lJylcclxuXHRcdFx0LnNldERlc2MoJ1N1cHBvcnRzIG5lc3RlZCBrZXlzLiBGb3IgZXhhbXBsZSBgdGltZXRoaW5ncy5lZGl0ZWRfc2Vjb25kc2AnKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ2VkaXRlZF9zZWNvbmRzJylcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZWRpdER1cmF0aW9uUGF0aClcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lZGl0RHVyYXRpb25QYXRoID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSkpO1xyXG5cclxuXHRcdFx0Y29uc3QgZGVzY0EgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblx0XHRcdGRlc2NBLmFwcGVuZChcclxuXHRcdFx0XHQnVGhlIHBvcnRpb24gb2YgdGltZSB5b3UgYXJlIG5vdCB0eXBpbmcgd2hlbiBlZGl0aW5nIGEgbm90ZS4gV29ya3MgYmVzdCB3aXRoIGN1c3RvbSBmcm9udG1hdHRlciBoYW5kbGluZyBzb2x1dGlvbi4gJyxcclxuXHRcdFx0XHRjcmVhdGVFbChcImFcIiwge1xyXG5cdFx0XHRcdFx0aHJlZjogXCJodHRwczovL2dpdGh1Yi5jb20vRHluYW1pY1BsYXllclNlY3Rvci90aW1ldGhpbmdzL3dpa2kvQ2FsY3VsYXRpbmcteW91ci1ub24lRTIlODAlOTB0eXBpbmctZWRpdGluZy1wZXJjZW50YWdlXCIsXHJcblx0XHRcdFx0XHR0ZXh0OiBcIkhvdyB0byBjYWxjdWxhdGUgeW91cnM/XCIsXHJcblx0XHRcdFx0fSksXHJcblx0XHRcdClcclxuXHJcblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnTm9uLXR5cGluZyBlZGl0aW5nIHRpbWUgcGVyY2VudGFnZScpXHJcblx0XHRcdC5zZXREZXNjKGRlc2NBKVxyXG5cdFx0XHQuYWRkU2xpZGVyKChzbGlkZXIpID0+XHJcblx0XHRcdFx0c2xpZGVyXHJcblx0XHRcdFx0XHQuc2V0TGltaXRzKDAsIDQwLCAyKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm5vblR5cGluZ0VkaXRpbmdUaW1lUGVyY2VudGFnZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Mubm9uVHlwaW5nRWRpdGluZ1RpbWVQZXJjZW50YWdlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0LnNldER5bmFtaWNUb29sdGlwKCksXHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gxJywgeyB0ZXh0OiAnRGFuZ2VyIHpvbmUnIH0pO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdZb3VcXCd2ZSBiZWVuIHdhcm5lZCEnIH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnUmVzZXQgc2V0dGluZ3MnKVxyXG5cdFx0XHQuc2V0RGVzYyhcIlJlc2V0cyBzZXR0aW5ncyB0byBkZWZhdWx0XCIpXHJcblx0XHRcdC5hZGRCdXR0b24oKGJ0bikgPT5cclxuXHRcdFx0XHRidG5cclxuXHRcdFx0XHRcdC5zZXRJY29uKFwic3dpdGNoXCIpXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIlJlc2V0IHNldHRpbmdzXCIpXHJcblx0XHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHNldHRpbmdzXCIpXHJcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgdGhpcy5wbHVnaW4ubG9hZERhdGEoKSk7XHJcblx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cdFx0XHRcdFx0fSksXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0fVxyXG5cdFxyXG59IiwgImltcG9ydCB7IEVkaXRvciwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgbW9tZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1vbWVudFRvQ2xvY2tFbW9qaSh0aW1lOiBtb21lbnQuTW9tZW50KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGhvdXIgPSB0aW1lLmhvdXIoKTtcclxuICAgIGNvbnN0IGhvdXIxMiA9IChob3VyICUgMTIpIHx8IDEyO1xyXG5cclxuICAgIHR5cGUgTnVtYmVyRGljdGlvbmFyeSA9IHtcclxuICAgICAgICBba2V5OiBudW1iZXJdOiBzdHJpbmc7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGNsb2NrRW1vamlNYXA6IE51bWJlckRpY3Rpb25hcnkgPSB7XHJcbiAgICAgICAgMTogJ1x1RDgzRFx1REQ1MCcsIDI6ICdcdUQ4M0RcdURENTEnLCAzOiAnXHVEODNEXHVERDUyJywgNDogJ1x1RDgzRFx1REQ1MycsIDU6ICdcdUQ4M0RcdURENTQnLCA2OiAnXHVEODNEXHVERDU1JyxcclxuICAgICAgICA3OiAnXHVEODNEXHVERDU2JywgODogJ1x1RDgzRFx1REQ1NycsIDk6ICdcdUQ4M0RcdURENTgnLCAxMDogJ1x1RDgzRFx1REQ1OScsIDExOiAnXHVEODNEXHVERDVBJywgMTI6ICdcdUQ4M0RcdURENUInXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nID0gY2xvY2tFbW9qaU1hcFtob3VyMTJdIHx8ICdcdTIzRjAnOyAvLyBEZWZhdWx0IGVtb2ppIGZvciB1bmtub3duIGhvdXJzXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUFpSTtBQUNqSSxJQUFBQSxtQkFBdUI7OztBQ0doQixTQUFTLFNBQVMsS0FBVSxXQUFtQjtBQUNsRCxRQUFNLE9BQU8sVUFBVSxNQUFNLEdBQUc7QUFDaEMsTUFBSSxRQUFRO0FBRVosYUFBVyxPQUFPLE1BQU07QUFDdEIsWUFBUSxNQUFNLEdBQUc7QUFDakIsUUFBSSxVQUFVLFFBQVc7QUFDdkIsYUFBTztBQUFBLElBQ1Q7QUFBQSxFQUNGO0FBRUEsU0FBTztBQUNYO0FBRU8sU0FBUyxTQUFTLEtBQVUsTUFBYyxPQUFZO0FBQ3pELFFBQU0sT0FBTyxLQUFLLE1BQU0sR0FBRztBQUMzQixNQUFJLGVBQWU7QUFFbkIsV0FBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLFNBQVMsR0FBRyxLQUFLO0FBQ3hDLFVBQU0sTUFBTSxLQUFLLENBQUM7QUFDbEIsUUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHO0FBQ3RCLG1CQUFhLEdBQUcsSUFBSSxDQUFDO0FBQUEsSUFDdkI7QUFDQSxtQkFBZSxhQUFhLEdBQUc7QUFBQSxFQUNqQztBQUVBLGVBQWEsS0FBSyxLQUFLLFNBQVMsQ0FBQyxDQUFDLElBQUk7QUFDMUM7OztBQzVCTyxTQUFTLGVBQWUsTUFBdUI7QUFDcEQsU0FBTyxV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QUFrQixtQkFBbUIsVUFBVTtBQUVyRCxTQUFLLFNBQVMsUUFBUSxRQUFRLE1BQU0sYUFBYTtBQUFBLEVBQ2xEO0FBQUEsRUFFQSxNQUFNLDBCQUEwQixNQUFxQjtBQUVwRCxVQUFNLEtBQUssSUFBSSxZQUFZLG1CQUFtQixNQUFlLENBQUMsZ0JBQWdCO0FBQzdFLFlBQU0sY0FBVSx5QkFBTztBQUN2QixZQUFNLGdCQUFnQixRQUFRLE9BQU8sS0FBSyxTQUFTLGlCQUFpQjtBQUVwRSxZQUFNLHFCQUFpQix5QkFBWSxTQUFTLGFBQWEsS0FBSyxTQUFTLGVBQWUsR0FBRyxLQUFLLFNBQVMsaUJBQWlCO0FBRXhILFVBQUksZUFBZSxJQUFJLEtBQUssU0FBUyxrQ0FBa0MsU0FBUyxJQUFJLFNBQ3BGO0FBQ0M7QUFBQSxNQUNEO0FBRUEsTUFBSyxTQUFTLGFBQWEsS0FBSyxTQUFTLGlCQUFpQixhQUFhO0FBQUEsSUFDeEUsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLFdBQVc7QUFBQSxFQUVYO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUMxRTtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ2xDO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJzZXRWYWx1ZSIsICJzZXRWYWx1ZSJdCn0K
